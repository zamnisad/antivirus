# ZamniVirus
Учебная антивирусная программа, написанная полностью на С++, предназначенная для сигнатурного
анализа данных.
---
### Краткое описание

**ZamniVirus** — это антивирус под операционную систему Windows, который использует сигнатуры для обнаружения вредоносных файлов.

Для сборки используется ***CMake*** — утилита, позволяющая удобно собирать проекты, написанные на C-подобных языках.

Принцип работы заключается в том, что антивирус сохраняет в память сигнатуры — некоторые последовательности HEX-строк, которые характерны лишь для конкретного вируса.

После этого антивирус сканирует все файлы, находящиеся в текущей директории и вложенных подкаталогах, пытаясь обнаружить совпадения с известными сигнатурами.

---
## Технологии
- C++
- Cmake
- Windows
- Standard C++ library
- Python
- Python argparse library
---
## Структура
```
ZamniVirus/
│
├── src/                            # Исходные файлы проекта
│   ├── Analyzers/                  # Анализ файлов
│   ├── Errors/                     # Обработка ошибок
│   ├── FileManager/                # Работа с файлами
│   ├── Filesystem/                 # Работа с файловой системой
│   ├── Logging/                    # Логгирование
│   ├── Signatures/                 # Работа с сигнатурами
│   └── main.cpp                    # Основной файл
│
├── include/                        # Заголовочные файлы
│
├── test_signature_generator/       # Файлы для генерации
│   ├── signature_generator.py      # Генерация сигнатур
│   └── test.py                     # Создание дерева директорий
│
├── CMakeLists.txt                  # Файл конфигурации сборки CMake
├── README.md                       # Документация проекта
└── LICENSE                         # Лицензия проекта
```
---
## Установка
Для установки и сборки проекта необходимо:
1. Клонировать репозиторий:
```bash
    git clone https://github.com/zamnisad/antivirus.git
```
2. Создать папку для сборки проекта:
```bash
    mkdir build
    cd build
```
3. Собрать проект с помощью CMake:
```bash
    cmake ..
    cmake --build .
```
После сборки проекта появится возможность запустить его, для этого необходимо 
перейти в следующую директорию:
```bash
cd \build\Debug    
```
---
## Использование
Проект запускается с помощью следующей команды:
```bash
antivirus.exe <log_path> <scan_directory> <quarantine_directory> <signature_file>
```
- `<log_path>` - файл для записи логов
- `<scan_directory>` - путь для сканирования на наличие вирусов
- `<quarantine_directory>` - путь к папке карантина
- `<signature_file>` - файл со списком сигнатур
---
## Генерация данных для теста

Генерация данных для теста производится следующим образом:

1. Из списка префиксов и суффиксов генерируется случайное имя для вируса.
2. Из списка описаний выбирается случайное и добавляется в данные к вирусу.
3. Генерируется паттерн случайной длины из случайных HEX-значений.
4. Все полученные выше данные соединяются в одну строку вида:  
   `<signature>;<virus_name>;<virus_description>`
5. Случайным образом генерируются вложенные папки с файлами, некоторые из которых имеют зашитую вирусную закодированную сигнатуру внутри.

### Пример запуска

Проект запускается с помощью следующей команды:
```bash
python signature_generator.py <params>
```
    
Где `<params>` включает в себя следующее:
- `--sig-file <signatures.txt>` — файл для записи сигнатур
- ` --sig-count <500>` — количество сигнатур
- `--output-dir <my_test_dir>` — папка в которой будут хранится файлы
- `--max-depth <6>` — максимальная глубина вложенных папок
- `--max-files <500>` — максимальное количество файлов
- `--max-size <100000>` — максимальный размер одного файла
- `--embed-count <500>` — количество зараженных файлов
- `--tree-file <inf_file_tree.txt>` — файл для логов и структуры папки с файлами
---
## Лицензия
Этот проект распространяется под лицензией [MIT](LICENSE).

Свободно используйте, модифицируйте и распространяйте, при условии указания авторства.